

<!DOCTYPE html>


<html lang="nl" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>9. Stemmen &#8212; Microbit-boek</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="_static/assessment.css" />
    <link rel="stylesheet" type="text/css" href="_static/progress.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="_static/assessment.js"></script>
    <script src="_static/progress.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/translations.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'stemmen';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Zoeken" href="search.html" />
    <link rel="next" title="10. Stopwatch" href="stopwatch.html" />
    <link rel="prev" title="8. Valdetectie" href="valdetectie.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="nl"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welkom bij deze cursus
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">microbit opdrachten</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="microbit-kennismaking.html">1. Leer de microbit kennen</a></li>
<li class="toctree-l1"><a class="reference internal" href="laden.html">2. Programma laden op de microbit</a></li>
<li class="toctree-l1"><a class="reference internal" href="kloppend-hart.html">3. Kloppend hart</a></li>
<li class="toctree-l1"><a class="reference internal" href="hello-world.html">4. Hello World!</a></li>
<li class="toctree-l1"><a class="reference internal" href="buttons-events.html">5. Buttons en events</a></li>
<li class="toctree-l1"><a class="reference internal" href="teller.html">6. Teller</a></li>
<li class="toctree-l1"><a class="reference internal" href="dimmer.html">7. Dimmer</a></li>
<li class="toctree-l1"><a class="reference internal" href="valdetectie.html">8. Valdetectie</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">9. Stemmen</a></li>
<li class="toctree-l1"><a class="reference internal" href="stopwatch.html">10. Stopwatch</a></li>
<li class="toctree-l1"><a class="reference internal" href="codeslot.html">11. Codeslot</a></li>
<li class="toctree-l1"><a class="reference internal" href="verkeerslichten.html">12. Verkeerslichten</a></li>
<li class="toctree-l1"><a class="reference internal" href="binaire-klok.html">13. Binaire klok</a></li>
<li class="toctree-l1"><a class="reference internal" href="cellulaire-automaat.html">14. Cellulaire automaat</a></li>
<li class="toctree-l1"><a class="reference internal" href="opdrachten/game-of-life.html">15. Game of Life</a></li>
<li class="toctree-l1"><a class="reference internal" href="opdrachten/serie-opteller.html">16. Serie-opteller</a></li>
<li class="toctree-l1"><a class="reference internal" href="led-met-timer.html">17. LED met timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="afstandssensor.html">18. Afstandssensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="pir-sensor.html">19. Energiebesparende verlichting</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">concepten</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="concepten/events-signalen.html">Events en signalen</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepten/cellulaire-automaten.html">Cellulaire automaten</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepten/timers.html">Timers en timer-events (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepten/automaten.html">Eindige automaten</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepten/input-output-systemen.html">input-output systemen</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">referentie</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="referentie/mu-editor.html">De Mu-editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="referentie/python.html">Python - cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="referentie/microbit-cheatsheet.html">microbit cheat sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="referentie/glossary.html">Woordenlijst</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">voor de docent</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="voordedocent.html">Voor de docent</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/eelcodijkstra/microbitbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Bronopslagplaats"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/eelcodijkstra/microbitbook/issues/new?title=Issue%20on%20page%20%2Fstemmen.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open een probleem"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download deze pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/stemmen.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download het bronbestand"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Afdrukken naar pdf"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Volledig scherm"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Zoeken" aria-label="Zoeken" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Stemmen</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="stemmen">
<h1><span class="section-number">9. </span>Stemmen<a class="headerlink" href="#stemmen" title="Permalink naar deze titel">#</a></h1>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm docutils">
<div class="sd-card-header bg-light docutils">
<p class="sd-card-text"><strong>Voorkennis</strong></p>
</div>
<div class="sd-card-body docutils">
<ul class="simple">
<li><p class="sd-card-text">buttons en events</p></li>
<li><p class="sd-card-text">eindige automaten</p></li>
</ul>
</div>
</div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm docutils">
<div class="sd-card-header bg-light docutils">
<p class="sd-card-text"><strong>Concepten</strong></p>
</div>
<div class="sd-card-body docutils">
<ul class="simple">
<li><p class="sd-card-text">radio</p></li>
<li><p class="sd-card-text">protocol</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Je maakt met behulp van de microbit een stemkastje, waarmee je je keuze (A of B) via de microbit-radio verstuurt naar een centrale “stembus”, waar de stemmen geteld worden.</p>
<p>Voor de communicatie tussen de stemkastjes en de stembus gelden de volgende afspraken:</p>
<ul class="simple">
<li><p>een stemronde begint met een ‘start’-bericht van de stembus naar de stemkastjes;</p>
<ul>
<li><p>stemmen ontvangen voor dit start-bericht tellen niet mee</p></li>
</ul>
</li>
<li><p>na het ontvangen van het start-bericht wordt het stemkastje actief (<code class="docutils literal notranslate"><span class="pre">state</span> <span class="pre">==</span> <span class="pre">ACTIVE</span></code>).</p></li>
<li><p>een actief stemkastje mag 1 stem uitbrengen; daarna wordt het afgesloten (<code class="docutils literal notranslate"><span class="pre">state</span> <span class="pre">==</span> <span class="pre">SENT</span></code>, tot de volgende stemronde)</p></li>
<li><p>de stembus stuurt een ‘exit’ bericht naar de stemkastjes om de stemronde af te sluiten;</p>
<ul>
<li><p>de stembus telt de stemmen</p></li>
</ul>
</li>
<li><p>na het ontvangen van het exit-bericht wordt het stemkastje inactief (<code class="docutils literal notranslate"><span class="pre">state</span> <span class="pre">==</span> <span class="pre">INACTIVE</span></code>) en mag geen stem meer uitbrengen.</p></li>
</ul>
<p>Dergelijke afspraken voor de communicatie tussen twee of meer partijen noemen we een (communicatie-)
<em>protocol</em>.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="_images/fsm-voting.png"><img alt="_images/fsm-voting.png" src="_images/fsm-voting.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9.1 </span><span class="caption-text">Toestanden van het stemkastje. 0: INACTIVE; 1: ACTIVE; 2: SENT</span><a class="headerlink" href="#id1" title="Permallink naar deze afbeelding">#</a></p>
</figcaption>
</figure>
<p>Voor testdoeleinden staan we toe dat het stemkastje meerdere stemmen mag uitbrengen.</p>
<p>Het programma voor het stemkastje:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">radio</span>

<span class="n">INACTIVE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ACTIVE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">SENT</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># test! should be 2 in final version</span>

<span class="n">state</span> <span class="o">=</span> <span class="n">INACTIVE</span>
<span class="n">radio</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>
<span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">button_a</span><span class="o">.</span><span class="n">was_pressed</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="n">ACTIVE</span><span class="p">:</span>
            <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
            <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">SENT</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">if</span> <span class="n">button_b</span><span class="o">.</span><span class="n">was_pressed</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="n">ACTIVE</span><span class="p">:</span>
            <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
            <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">SENT</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">radio</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">msg</span> <span class="o">==</span> <span class="s1">&#39;start&#39;</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">ACTIVE</span>
            <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;O&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">msg</span> <span class="o">==</span> <span class="s1">&#39;stop&#39;</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">INACTIVE</span>
            <span class="n">display</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Het programma voor de stembus:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">microbit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">radio</span>

<span class="n">a_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">b_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">radio</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Voting app&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;s for start vote, x for exit (stop) vote&#39;</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">uart</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="n">uart</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">cmd</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;s&#39;</span><span class="p">:</span>
            <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">)</span>
            <span class="n">a_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">b_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;x&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;exit&#39;</span><span class="p">)</span>
            <span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;total A: </span><span class="si">{}</span><span class="s1"> B: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a_count</span><span class="p">,</span> <span class="n">b_count</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;unknown cmd: &#39;</span> <span class="o">+</span> <span class="n">cmd</span><span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">radio</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">msg</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span>
            <span class="n">a_count</span> <span class="o">=</span> <span class="n">a_count</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">msg</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
            <span class="n">b_count</span> <span class="o">=</span> <span class="n">b_count</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;unknown response: &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>Over het gebruik van radio:</p>
<ul class="simple">
<li><p>voordat je de radio kunt gebruiken, moet je (i) de module importeren; (ii) de radio aanzetten, met <code class="docutils literal notranslate"><span class="pre">radio.on()</span></code>.</p></li>
<li><p>met <code class="docutils literal notranslate"><span class="pre">radio.send(s)</span></code> stuur je een string naar de ontvanger(s). Alle radio’s met dezelfde kanaal- en groep-instellingen ontvangen dit bericht.</p></li>
<li><p>met <code class="docutils literal notranslate"><span class="pre">radio.receive()</span></code> haal je een ontvangen bericht op als string; als er geen bericht is, is het resultaat <code class="docutils literal notranslate"><span class="pre">None</span></code>. Het ontvangen van een bericht kun je zien als een <em>event</em>.</p></li>
</ul>
<p>De microbit-radio is een voorbeeld van een <em>pakketradio</em>: de communicatie gebeurt in de vorm van kleine pakketten (maximaal 248 bytes; default maximum: 32 bytes). Als een pakket ontvangen is, controleert de hardware via de <em>checksum</em> of dit onbeschadigd is. Maar er is geen garantie dat een verzonden pakket ook daarwerkelijk ontvangen wordt: de communicatie is <em>best effort</em>. Je kunt deze commnicatie <em>betrouwbaar</em> maken door een extra protocol te gebruiken, bij voorbeeld door het versturen van bericht van ontvangst (<em>acknowledgement</em>).</p>
<p><strong>Uitbreidingen</strong></p>
<p>Er is geen enkele garantie voor de betrouwbaarheid van de communicatie: een radiobericht kan verloren gaan door bijvoorbeeld onderlingen botsingen (“collisions”). Een manier om communicatie betrouwbaar te maken is het versturen van een bericht van ontvangst (“acknowledgement”). Bedenk een manier waarop je de betrouwbaarheid van de verschillende berichten kunt vergroten. Wat is daar voor nodig?</p>
<p>Met twee knoppen kun je meer dan twee verschillende stemmen uitbrengen. Pas het stemkastje aan zodat je door tweemaal drukken uit 4 alternatieven kunt kiezen: A, B, C, of D. Denk erom dat je dan ook de “stembus”-code moet aanpassen.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "eelcodijkstra/microbitbook",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="valdetectie.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">vorige</p>
        <p class="prev-next-title"><span class="section-number">8. </span>Valdetectie</p>
      </div>
    </a>
    <a class="right-next"
       href="stopwatch.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">volgende</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Stopwatch</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Door Eelco Dijkstra
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>